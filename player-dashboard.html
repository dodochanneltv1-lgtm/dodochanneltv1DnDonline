<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Player Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script> 
    <style>
      @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700&family=Prompt:wght@400;600&display=swap');

      /* --- [NEW] ‡πÇ‡∏Ñ‡πâ‡∏î Style ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πå‡∏î‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• --- */
      .result-card {
        background: rgba(0, 0, 0, 0.85);
        border: 2px solid #a97125;
        border-radius: 10px;
        padding: 15px;
        margin-top: 15px;
        box-shadow: 0 0 10px rgba(0,0,0,0.5);
        transition: all 0.5s ease;
        opacity: 1;
      }
      .result-card.hidden {
        opacity: 0;
        transform: translateY(20px);
        pointer-events: none;
      }
      .result-card h4 {
        margin: 0 0 10px 0;
        padding-bottom: 5px;
        color: #ffc107;
        text-align: center;
        border-bottom: 1px solid #a97125;
      }
      .result-card p {
        margin: 5px 0;
        font-family: 'Prompt', sans-serif;
      }
      .result-card .outcome {
        margin-top: 10px;
        padding-top: 10px;
        border-top: 1px solid #a97125;
        font-weight: bold;
        font-size: 1.2em;
        text-align: center;
      }
      .result-card.miss {
        border-color: #dc3545;
        box-shadow: 0 0 15px #dc3545;
      }
      .result-card.miss .outcome { color: #ff4d4d; }
      .result-card.hit {
        border-color: #28a745;
        box-shadow: 0 0 15px #28a745;
      }
      .result-card.hit .outcome { color: #00ff00; }
      /* --- ‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏™‡πà‡∏ß‡∏ô Style ‡πÉ‡∏´‡∏°‡πà --- */

      body {
        font-family: 'Cinzel', serif;
        margin: 0;
        padding: 30px;
        background-image: url('0af9b63d-31b3-4514-9180-b5cb36d6db90.png');
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        color: #f5deb3;
        text-shadow: 1px 1px 3px #000;
      }

      .grid-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 20px;
      }

      .panel {
        background: rgba(10, 0, 0, 0.75);
        border: 1px solid rgba(255, 140, 0, 0.5);
        border-radius: 12px;
        padding: 20px;
        box-shadow: 0 0 15px rgba(255, 69, 0, 0.4);
      }

      h2 {
        text-align: center;
        color: #ffa500;
        border-bottom: 1px solid rgba(255, 140, 0, 0.5);
        padding-bottom: 5px;
        margin-bottom: 10px;
        text-shadow: 0 0 8px #ff4500;
      }

      p, li, label, strong {
        color: #fff5cc;
        font-family: 'Prompt', sans-serif;
        font-weight: 600;
        text-shadow: 1px 1px 2px #000;
      }
      ul {
        list-style: none;
        padding: 0;
        margin: 0;
      }

      button {
        width: 100%;
        margin-top: 10px;
        padding: 10px;
        font-family: 'Cinzel', serif;
        font-weight: 600;
        border: none;
        border-radius: 10px;
        background: linear-gradient(90deg, #ff4500, #ffae00);
        color: #fff;
        cursor: pointer;
        text-shadow: 1px 1px 3px #000;
        box-shadow: 0 0 10px rgba(255, 69, 0, 0.7);
        transition: all 0.3s ease;
      }
      button:hover {
        transform: scale(1.05);
        box-shadow: 0 0 20px rgba(255, 165, 0, 0.9);
      }
      
      #dice-result, #attackRollResult, #damageRollResult {
        font-size: 1.1em;
        text-align: center;
        color: #ffeb8a;
        text-shadow: 0 0 8px #ff4500;
        margin-top: 15px;
      }

      #player-dice-animation-area {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 80px;
        margin: 10px 0;
      }
      #player-dice-animation-area > div {
          width: 60px;
          height: 60px;
      }

      @media (max-width: 768px) {
        body { padding: 10px; }
        .grid-container { grid-template-columns: 1fr; }
      }
      #turnIndicator { text-align: center; padding: 10px; border-radius: 5px; margin-bottom: 10px; font-weight: bold; }
        #turnIndicator.my-turn { background-color: #28a745; color: white; text-shadow: 1px 1px 2px black; }
        #turnIndicator.other-turn { background-color: #333; color: #aaa; }
      .stat-change {
    transition: color 0.3s ease, font-weight 0.3s ease;
    animation-duration: 1s;
    animation-iteration-count: 3;
}
.stat-up {
    color: #00ff00; /* ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô */
    animation-name: stat-flash-up;
    font-weight: bold;
}
.stat-down {
    color: #ff4d4d; /* ‡πÅ‡∏î‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡πà‡∏≤‡∏•‡∏á */
    animation-name: stat-flash-down;
    font-weight: bold;
}

@keyframes stat-flash-up {
    0% { color: #fff; }
    50% { color: #00ff00; transform: scale(1.1); }
    100% { color: inherit; }
}

@keyframes stat-flash-down {
    0% { color: #fff; }
    50% { color: #ff4d4d; transform: scale(0.9); }
    100% { color: inherit; }
}
    </style>
</head>
<body>
    <div class="grid-container">
    
        <div class="panel" id="characterInfoPanel">
            <h2>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£</h2>
            <p><strong>‡∏ä‡∏∑‡πà‡∏≠:</strong> <span id="name"></span></p>
            <p><strong>‡πÄ‡∏ú‡πà‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå:</strong> <span id="race"></span></p>
            <p><strong>‡∏≠‡∏≤‡∏¢‡∏∏:</strong> <span id="age"></span></p>
            <p><strong>‡πÄ‡∏û‡∏®:</strong> <span id="gender"></span></p>
            <p><strong>‡∏≠‡∏≤‡∏ä‡∏µ‡∏û:</strong> <span id="class"></span></p>
            <details>
                <summary><strong>‡∏†‡∏π‡∏°‡∏¥‡∏´‡∏•‡∏±‡∏á (‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π)</strong></summary>
                <p id="background" style="margin-top: 5px; padding: 10px; background: rgba(0,0,0,0.2); border-radius: 5px;"></p>
            </details>
            <p><strong>‡πÄ‡∏•‡πÄ‡∏ß‡∏•:</strong> <span id="level"></span></p> 
            <p><strong>‡∏û‡∏•‡∏±‡∏á‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï:</strong> <span id="hp"></span></p>
            <ul>
                <li>‡∏û‡∏•‡∏±‡∏á‡πÇ‡∏à‡∏°‡∏ï‡∏µ (STR): <span id="str"></span></li>
                <li>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏•‡πà‡∏≠‡∏á‡πÅ‡∏Ñ‡∏•‡πà‡∏ß (DEX): <span id="dex"></span></li>
                <li>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏ô‡∏ó‡∏≤‡∏ô (CON): <span id="con"></span></li>
                <li>‡∏™‡∏ï‡∏¥‡∏õ‡∏±‡∏ç‡∏ç‡∏≤ (INT): <span id="int"></span></li>
                <li>‡∏à‡∏¥‡∏ï‡πÉ‡∏à (WIS): <span id="wis"></span></li>
                <li>‡πÄ‡∏™‡∏ô‡πà‡∏´‡πå (CHA): <span id="cha"></span></li>
            </ul>
        </div>

        <div class="panel">
            <h2>‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÅ‡∏•‡∏∞‡∏ó‡∏≠‡∏¢‡πÄ‡∏ï‡πã‡∏≤</h2>
            <label for="diceType">‡∏ä‡∏ô‡∏¥‡∏î‡πÄ‡∏ï‡πã‡∏≤:</label>
            <select id="diceType">
                <option value="4">d4</option>
                <option value="6">d6</option>
                <option value="8">d8</option>
                <option value="10">d10</option>
                <option value="12">d12</option>
                <option value="20" selected>d20</option>
                <option value="100">d100</option>
            </select>
            <label for="diceCount">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏•‡∏π‡∏Å:</label>
            <input type="number" id="diceCount" value="1" min="1" max="10">
            <button onclick="playerRollDice()">‡∏ó‡∏≠‡∏¢‡πÄ‡∏ï‡πã‡∏≤ (‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ)</button>
            <div id="player-dice-animation-area"></div>
            <div id="dice-result"></div>

            <button id="goToStatsButton" onclick="location.href='stat-assignment.html'" style="display:none; background-color: #ffc107; color: black; margin-top: 15px;">
                ‡∏≠‡∏±‡∏õ‡πÄ‡∏Å‡∏£‡∏î‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
            </button>
            <a href="lobby.html"><button style="background-color: #6c757d;">‡∏Å‡∏•‡∏±‡∏ö‡∏•‡πá‡∏≠‡∏ö‡∏ö‡∏µ‡πâ</button></a>
        </div>

        <div class="panel" id="combatPanel" style="border-color: #dc3545;">
            <h2>‚öîÔ∏è ‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠‡∏™‡∏π‡πâ ‚öîÔ∏è</h2>
            <div id="turnIndicator" class="hidden"></div>
            
            <label for="enemyTargetSelect"><strong>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢:</strong></label>
            <select id="enemyTargetSelect" style="width: 100%; margin-bottom: 10px;"></select>
            
            <button id="attackRollButton" onclick="performAttackRoll()">1. ‡∏ó‡∏≠‡∏¢‡πÄ‡∏ï‡πã‡∏≤‡πÇ‡∏à‡∏°‡∏ï‡∏µ (d20)</button>
            
            <div id="damageRollSection" style="display:none; margin-top:15px; border-top: 1px dashed #ccc; padding-top: 10px;">
                <p style="color:#28a745;">‡πÇ‡∏à‡∏°‡∏ï‡∏µ‡πÇ‡∏î‡∏ô! ‡∏ó‡∏≠‡∏¢‡πÄ‡∏ï‡πã‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢:</p>
                <p><strong>‡∏≠‡∏≤‡∏ß‡∏∏‡∏ò:</strong> <span id="damageWeaponName">-</span> (<span id="damageDiceInfo"></span>)</p>
                <button id="damageRollButton" onclick="performDamageRoll()">2. ‡∏ó‡∏≠‡∏¢‡πÄ‡∏ï‡πã‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢</button>
            </div>

            <div id="rollResultCard" class="result-card hidden">
                </div>
        </div>

        <div class="panel">
            <h2>üéí ‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤</h2>
            <ul id="inventory">
                <li>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÑ‡∏≠‡πÄ‡∏ó‡∏°</li>
            </ul>
        </div>
        
        <div class="panel">
            <h2>üõ°Ô∏è ‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏™‡∏ß‡∏°‡πÉ‡∏™‡πà</h2>
            <ul id="equippedItemsList">
                <li><strong>‡∏≠‡∏≤‡∏ß‡∏∏‡∏ò‡∏´‡∏•‡∏±‡∏Å:</strong> <span id="eq-mainHand">-</span> <button onclick="unequipItem('mainHand')" style="display:none; width:auto; padding: 2px 8px; font-size:0.8em; background-color:#dc3545;">‡∏ñ‡∏≠‡∏î</button></li>
                <li><strong>‡∏≠‡∏≤‡∏ß‡∏∏‡∏ò‡∏£‡∏≠‡∏á:</strong> <span id="eq-offHand">-</span> <button onclick="unequipItem('offHand')" style="display:none; width:auto; padding: 2px 8px; font-size:0.8em; background-color:#dc3545;">‡∏ñ‡∏≠‡∏î</button></li>
                <li><strong>‡∏´‡∏±‡∏ß:</strong> <span id="eq-head">-</span> <button onclick="unequipItem('head')" style="display:none; width:auto; padding: 2px 8px; font-size:0.8em; background-color:#dc3545;">‡∏ñ‡∏≠‡∏î</button></li>
                <li><strong>‡∏•‡∏≥‡∏ï‡∏±‡∏ß:</strong> <span id="eq-chest">-</span> <button onclick="unequipItem('chest')" style="display:none; width:auto; padding: 2px 8px; font-size:0.8em; background-color:#dc3545;">‡∏ñ‡∏≠‡∏î</button></li>
                <li><strong>‡∏Ç‡∏≤:</strong> <span id="eq-legs">-</span> <button onclick="unequipItem('legs')" style="display:none; width:auto; padding: 2px 8px; font-size:0.8em; background-color:#dc3545;">‡∏ñ‡∏≠‡∏î</button></li>
                <li><strong>‡πÄ‡∏ó‡πâ‡∏≤:</strong> <span id="eq-feet">-</span> <button onclick="unequipItem('feet')" style="display:none; width:auto; padding: 2px 8px; font-size:0.8em; background-color:#dc3545;">‡∏ñ‡∏≠‡∏î</button></li>
            </ul>
        </div>

        <div class="panel">
            <h2>üë• ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏£‡πà‡∏ß‡∏°‡∏ó‡∏µ‡∏°</h2>
            <select id="teammateSelect" onchange="showTeammateInfo()">
                <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• --</option>
            </select>
            <div id="teammateInfo" style="margin-top: 10px; padding: 8px; background: rgba(0,0,0,0.2); border-radius: 5px;">
                <p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏£‡πà‡∏ß‡∏°‡∏ó‡∏µ‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>
            </div>
        </div>

        <div class="panel">
            <h2>‡∏Ñ‡∏π‡πà‡∏ï‡πà‡∏≠‡∏™‡∏π‡πâ</h2>
            <div id="enemyPanelContainer">
                <p><em>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏®‡∏±‡∏ï‡∏£‡∏π‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡πà‡∏≠‡∏™‡∏π‡πâ‡∏Å‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì</em></p>
            </div>
        </div>

        <div class="panel" id="questPanel">
            <h2>‡πÄ‡∏Ñ‡∏ß‡∏™‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö</h2>
            <p><strong>‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Ñ‡∏ß‡∏™:</strong> <span id="questTitle">-</span></p>
            <p><strong>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:</strong> <span id="questDetail">-</span></p>
            <p><strong>‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•:</strong> <span id="questReward">-</span></p> 
        </div>

        <div class="panel">
            <h2>‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h2>
            <p id="story">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á</p>
        </div>
    </div>
      <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
      <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
      <script src="Javascript/firebase-init.js"></script>
      <script src="Javascript/dice-roller.js"></script>
      <script src="Javascript/player-dashboard-script.js"></script>
</body>
</html>

